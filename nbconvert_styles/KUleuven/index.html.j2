{%- extends 'reveal/index.html.j2' -%}

{% block notebook_css %}
{{ super() }}
{{ resources.include_css("KULeuven.css") }}
<style type="text/css">

  {%- if "KULeuvenSlides" in nb.metadata -%}
  {%- if "kuleuven_presentation_style" in nb.metadata.KULeuvenSlides -%}
  {%- if nb.metadata.KULeuvenSlides.kuleuven_presentation_style=="Sedes" -%}

.kuleuven_title_slide {background: url(data:image/png;base64,{{ resources['kul-img'] }}),url(data:image/png;base64,{{ resources['sedes-img'] }}),linear-gradient(#fff calc(60px), #1D8DB0 calc(60px));
    background-repeat: no-repeat,no-repeat,no-repeat;
    background-position: 30px 20px, 100% 100%, top;
    background-size: 450px, 40%,  100%;}
.kuleuven_structure_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),url(data:image/png;base64,{{ resources['sedes-img'] }}),linear-gradient( #DCE7F0 calc(100% - 60px), #1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px,right bottom 60px, bottom;
    background-size: 100px,40%,100%;
    background-repeat: no-repeat,no-repeat,no-repeat;}
.kuleuven_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),url(data:image/png;base64,{{ resources['sedes-sde-img'] }}),linear-gradient(#fff calc(100% - 60px),#1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px,right bottom 60px, bottom;
    background-size: 100px,40%,100%;
    background-repeat: no-repeat,no-repeat,no-repeat;}

    {%- elif nb.metadata.KULeuvenSlides.kuleuven_presentation_style=="1425" -%}

.kuleuven_title_slide {background: url(data:image/png;base64,{{ resources['kul-img'] }}),url(data:image/png;base64,{{ resources['sleutel-img'] }}),linear-gradient(#fff calc(60px), #1D8DB0 calc(60px));
    background-position: 30px 20px, right bottom 60px, top;
    background-size: 450px, 20%,  100%;
    background-repeat: no-repeat,no-repeat,no-repeat;}
.kuleuven_structure_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),url(data:image/png;base64,{{ resources['sleutel-img'] }}),linear-gradient( #DCE7F0 calc(100% - 60px), #1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px,right bottom 60px, bottom;
    background-size: 100px,20%,100%;
    background-repeat: no-repeat,no-repeat,no-repeat;}
.kuleuven_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),url(data:image/png;base64,{{ resources['sedes-sde-img'] }}),linear-gradient(#fff calc(100% - 60px),#1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px,right bottom 60px, bottom;
    background-size: 100px,40%,100%;
    background-repeat: no-repeat,no-repeat,no-repeat;}

    {%- else -%}

.kuleuven_title_slide {background: url(data:image/png;base64,{{ resources['kul-img'] }}),linear-gradient(#1D8DB0 70%,#DCE7F0 70%);
    background-position: 30px 20px,  bottom;
    background-size: 450px,   100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_structure_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient( #DCE7F0 calc(100% - 60px), #1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient(#fff calc(100% - 60px),#1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}

    {%- endif -%}
    
    {%- else -%}

.kuleuven_title_slide {background: url(data:image/png;base64,{{ resources['kul-img'] }}),linear-gradient(#1D8DB0 70%,#DCE7F0 70%);
    background-position: 30px 20px,  bottom;
    background-size: 450px,   100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_structure_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient( #DCE7F0 calc(100% - 60px), #1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient(#fff 93%,#1D8DB0 93%);
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}

    {%- endif -%}
    
    {%- else -%}

.kuleuven_title_slide {background: url(data:image/png;base64,{{ resources['kul-img'] }}),linear-gradient(#1D8DB0 70%,#DCE7F0 70%);
    background-position: 30px 20px,  bottom;
    background-size: 450px,   100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_structure_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient( #DCE7F0 calc(100% - 60px), #1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}
.kuleuven_slide {background: url(data:image/png;base64,{{ resources['KULeuven-img'] }}),linear-gradient(#fff calc(100% - 60px),#1D8DB0 calc(100% - 60px));
    background-position: right 110px bottom 10px, bottom;
    background-size: 100px,100%;
    background-repeat: no-repeat,no-repeat;}

    {%- endif -%}
</style>
{% endblock notebook_css%}

{% block body_header %}
  {{ super() }}

  {%- if "KULeuvenSlides" in nb.metadata -%}
  <section class='kuleuven_title_slide kuleuven'><section>
  {%- if "title" in nb.metadata.KULeuvenSlides -%}
    <h1 class="title">{{ nb.metadata.KULeuvenSlides.title }}</h1>
  {%- endif -%}
  {%- if "subtitle" in nb.metadata.KULeuvenSlides -%}
    <h2 class="subtitle">{{ nb.metadata.KULeuvenSlides.subtitle }}</h2>
  {%- endif -%}
  {%- if "authors" in nb.metadata.KULeuvenSlides -%}
    <div class="speaker">{{ nb.metadata.KULeuvenSlides.authors }}</div>
  {%- endif -%}
  {%- if "location" in nb.metadata.KULeuvenSlides -%}
    <div class="location">{{ nb.metadata.KULeuvenSlides.location }}</div>
  {%- endif -%}
  {%- if "date" in nb.metadata.KULeuvenSlides -%}
    <div class="date">{{ nb.metadata.KULeuvenSlides.date }}</div>
  {%- endif -%}
  </section></section>
  {%- endif -%}

{% endblock body_header %}

{% block footer_js %}
<script>
require(
    {
      // it makes sense to wait a little bit when you are loading
      // reveal from a cdn in a slow connection environment
      waitSeconds: 15
    },
    [
      "{{ reveal_url_prefix }}/dist/reveal.js",
      "{{ reveal_url_prefix }}/plugin/notes/notes.js"
    ],

    function(Reveal, RevealNotes){
        // Full list of configuration options available here: https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            disableLayout: true,
            transition: "{{reveal_transition}}",
            slideNumber: "{{reveal_number}}",
            plugins: [RevealNotes]
        });

        var update = function(event){
          if(MathJax.Hub.getAllJax(Reveal.getCurrentSlide())){
            MathJax.Hub.Rerender(Reveal.getCurrentSlide());
          }
        };

        Reveal.addEventListener('slidechanged', update);

        function setScrollingSlide() {
            var scroll = {{ reveal_scroll }}
            if (scroll === true) {
              var h = $('.reveal').height() * 0.95;
              $('section.present').find('section')
                .filter(function() {
                  return $(this).height() > h;
                })
                .css('height', 'calc(95vh)')
                .css('overflow-y', 'scroll')
                .css('margin-top', '20px');
            }
        }

        // check and set the scrolling slide every time the slide change
        Reveal.addEventListener('slidechanged', setScrollingSlide);
    }
);
</script>
{% endblock footer_js %}
</html>
{% endblock footer %}